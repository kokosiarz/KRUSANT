{"version":3,"sources":["../src/main.ts"],"sourcesContent":["/* eslint-disable prettier/prettier */\nimport { NestFactory } from '@nestjs/core';\nimport { ValidationPipe } from '@nestjs/common';\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport cookieParser from 'cookie-parser';\nimport * as fs from 'fs';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule, {\n    logger: ['error', 'warn', 'log'],\n    abortOnError: false,\n  });\n\n  app.enableCors({\n    origin: 'http://localhost:3001',\n    credentials: true,\n  });\n\n  app.use(cookieParser());\n  app.useGlobalPipes(new ValidationPipe({ whitelist: true }));\n\n  const config = new DocumentBuilder()\n    .setTitle('KRUSANT API')\n    .setDescription('API documentation for KRUSANT backend')\n    .setVersion('1.0')\n    .addBearerAuth()\n    .build();\n  const document = SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('docs', app, document);\n\n  // Export OpenAPI schema to JSON file\n  fs.writeFileSync('./openapi.json', JSON.stringify(document, null, 2));\n  fs.writeFileSync('../frontend/backend_openapi.json', JSON.stringify(document, null, 2));\n  console.log('OpenAPI schema exported to openapi.json');\n\n  await app.listen(3002);\n\n  console.log(`Application is running on: ${await app.getUrl()}`);\n  console.log(`Swagger docs available at: ${await app.getUrl()}/docs`);\n}\n\nbootstrap().catch((err) => {\n  console.error('Failed to start application:', err);\n  process.exit(1);\n});\n"],"names":["bootstrap","app","NestFactory","create","AppModule","logger","abortOnError","enableCors","origin","credentials","use","cookieParser","useGlobalPipes","ValidationPipe","whitelist","config","DocumentBuilder","setTitle","setDescription","setVersion","addBearerAuth","build","document","SwaggerModule","createDocument","setup","fs","writeFileSync","JSON","stringify","console","log","listen","getUrl","catch","err","error","process","exit"],"mappings":"AAAA,oCAAoC;;;;sBACR;wBACG;yBACgB;2BACrB;qEACD;4DACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEpB,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAACC,oBAAS,EAAE;QAC9CC,QAAQ;YAAC;YAAS;YAAQ;SAAM;QAChCC,cAAc;IAChB;IAEAL,IAAIM,UAAU,CAAC;QACbC,QAAQ;QACRC,aAAa;IACf;IAEAR,IAAIS,GAAG,CAACC,IAAAA,qBAAY;IACpBV,IAAIW,cAAc,CAAC,IAAIC,sBAAc,CAAC;QAAEC,WAAW;IAAK;IAExD,MAAMC,SAAS,IAAIC,wBAAe,GAC/BC,QAAQ,CAAC,eACTC,cAAc,CAAC,yCACfC,UAAU,CAAC,OACXC,aAAa,GACbC,KAAK;IACR,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAACvB,KAAKc;IACnDQ,sBAAa,CAACE,KAAK,CAAC,QAAQxB,KAAKqB;IAEjC,qCAAqC;IACrCI,IAAGC,aAAa,CAAC,kBAAkBC,KAAKC,SAAS,CAACP,UAAU,MAAM;IAClEI,IAAGC,aAAa,CAAC,oCAAoCC,KAAKC,SAAS,CAACP,UAAU,MAAM;IACpFQ,QAAQC,GAAG,CAAC;IAEZ,MAAM9B,IAAI+B,MAAM,CAAC;IAEjBF,QAAQC,GAAG,CAAC,CAAC,2BAA2B,EAAE,MAAM9B,IAAIgC,MAAM,IAAI;IAC9DH,QAAQC,GAAG,CAAC,CAAC,2BAA2B,EAAE,MAAM9B,IAAIgC,MAAM,GAAG,KAAK,CAAC;AACrE;AAEAjC,YAAYkC,KAAK,CAAC,CAACC;IACjBL,QAAQM,KAAK,CAAC,gCAAgCD;IAC9CE,QAAQC,IAAI,CAAC;AACf"}