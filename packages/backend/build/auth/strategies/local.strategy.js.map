{"version":3,"sources":["../../../src/auth/strategies/local.strategy.ts"],"sourcesContent":["import { Injectable, UnauthorizedException } from '@nestjs/common';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy } from 'passport-local';\nimport { AuthService } from '../auth.service';\n\n@Injectable()\nexport class LocalStrategy extends PassportStrategy(Strategy) {\n  constructor(private authService: AuthService) {\n    super({ usernameField: 'email' });\n  }\n\n  async validate(email: string, password: string): Promise<any> {\n    const user = await this.authService.validate({ email, password });\n    if (!user) {\n      throw new UnauthorizedException();\n    }\n    return user;\n  }\n}"],"names":["LocalStrategy","PassportStrategy","Strategy","validate","email","password","user","authService","UnauthorizedException","usernameField"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANqC;0BACjB;+BACR;6BACG;;;;;;;;;;AAGrB,IAAA,AAAMA,gBAAN,MAAMA,sBAAsBC,IAAAA,0BAAgB,EAACC,uBAAQ;IAK1D,MAAMC,SAASC,KAAa,EAAEC,QAAgB,EAAgB;QAC5D,MAAMC,OAAO,MAAM,IAAI,CAACC,WAAW,CAACJ,QAAQ,CAAC;YAAEC;YAAOC;QAAS;QAC/D,IAAI,CAACC,MAAM;YACT,MAAM,IAAIE,6BAAqB;QACjC;QACA,OAAOF;IACT;IAVA,YAAY,AAAQC,WAAwB,CAAE;QAC5C,KAAK,CAAC;YAAEE,eAAe;QAAQ,SADbF,cAAAA;IAEpB;AASF"}