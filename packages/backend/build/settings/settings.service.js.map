{"version":3,"sources":["../../src/settings/settings.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { Settings } from './settings.entity';\nimport { UpdateSettingsDto } from './dto/update-settings.dto';\n\n@Injectable()\nexport class SettingsService {\n  constructor(\n    @InjectRepository(Settings)\n    private readonly repo: Repository<Settings>,\n  ) {}\n\n  async get(): Promise<Settings> {\n    // Ensure a single settings row exists (id = 1)\n    let current = await this.repo.findOne({ where: { id: 1 } });\n    if (!current) {\n      current = this.repo.create({ id: 1, institutionName: 'Institution', currency: 'PLN' });\n      await this.repo.save(current);\n    }\n    return current;\n  }\n\n  async update(dto: UpdateSettingsDto): Promise<Settings> {\n    const current = await this.get();\n    Object.assign(current, dto);\n    return this.repo.save(current);\n  }\n}\n"],"names":["SettingsService","get","current","repo","findOne","where","id","create","institutionName","currency","save","update","dto","Object","assign"],"mappings":";;;;+BAOaA;;;eAAAA;;;wBAPc;yBACM;0BACN;gCACF;;;;;;;;;;;;;;;AAIlB,IAAA,AAAMA,kBAAN,MAAMA;IAMX,MAAMC,MAAyB;QAC7B,+CAA+C;QAC/C,IAAIC,UAAU,MAAM,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC;YAAEC,OAAO;gBAAEC,IAAI;YAAE;QAAE;QACzD,IAAI,CAACJ,SAAS;YACZA,UAAU,IAAI,CAACC,IAAI,CAACI,MAAM,CAAC;gBAAED,IAAI;gBAAGE,iBAAiB;gBAAeC,UAAU;YAAM;YACpF,MAAM,IAAI,CAACN,IAAI,CAACO,IAAI,CAACR;QACvB;QACA,OAAOA;IACT;IAEA,MAAMS,OAAOC,GAAsB,EAAqB;QACtD,MAAMV,UAAU,MAAM,IAAI,CAACD,GAAG;QAC9BY,OAAOC,MAAM,CAACZ,SAASU;QACvB,OAAO,IAAI,CAACT,IAAI,CAACO,IAAI,CAACR;IACxB;IAnBA,YACE,AACiBC,IAA0B,CAC3C;aADiBA,OAAAA;IAChB;AAiBL"}