{"version":3,"sources":["../../src/users/users.controller.ts"],"sourcesContent":["import { Body, Controller, Param, Get, Post, Patch, Delete } from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse, ApiParam, ApiBody } from '@nestjs/swagger';\nimport { UsersService } from './users.service';\nimport { CreateUserDto } from './dto/create-user.dto';\nimport { UpdateUserDto } from './dto/update-user.dto';\n\n@ApiTags('users')\n@Controller('users')\nexport class UsersController {\n  constructor(private readonly usersService: UsersService) {}\n\n  @ApiOperation({ summary: 'Get all users' })\n  @ApiResponse({ status: 200, description: 'Returns all users' })\n  @Get()\n  async getAll() {\n    return await this.usersService.findAll();\n  }\n\n  @ApiOperation({ summary: 'Get user by ID' })\n  @ApiParam({ name: 'id', description: 'User ID' })\n  @ApiResponse({ status: 200, description: 'Returns user' })\n  @Get(':id')\n  async getOne(@Param('id') id: string) {\n    return await this.usersService.findById(+id);\n  }\n\n  @ApiOperation({ summary: 'Create new user' })\n  @ApiBody({ type: CreateUserDto })\n  @ApiResponse({ status: 201, description: 'User created' })\n  @Post()\n  async create(@Body() body: CreateUserDto) {\n    const user = await this.usersService.create({\n      email: body.email,\n      password: body.password,\n      roles: body.roles,\n      teacherId: body.teacherId,\n      studentId: body.studentId,\n    });\n    // Don't return password hash\n    const { passwordHash, ...result } = user;\n    return result;\n  }\n\n  @ApiOperation({ summary: 'Update user' })\n  @ApiParam({ name: 'id', description: 'User ID' })\n  @ApiBody({ type: UpdateUserDto })\n  @ApiResponse({ status: 200, description: 'User updated' })\n  @Patch(':id')\n  async update(@Param('id') id: string, @Body() body: UpdateUserDto) {\n    return await this.usersService.update(+id, body);\n  }\n\n  @ApiOperation({ summary: 'Delete user' })\n  @ApiParam({ name: 'id', description: 'User ID' })\n  @ApiResponse({ status: 200, description: 'User deleted' })\n  @Delete(':id')\n  async delete(@Param('id') id: string) {\n    await this.usersService.remove(+id);\n    return { message: 'User deleted successfully' };\n  }\n}\n"],"names":["UsersController","getAll","usersService","findAll","getOne","id","findById","create","body","user","email","password","roles","teacherId","studentId","passwordHash","result","update","delete","remove","message","summary","status","description","name","type","CreateUserDto","UpdateUserDto"],"mappings":";;;;+BAQaA;;;eAAAA;;;wBARqD;yBACI;8BACzC;+BACC;+BACA;;;;;;;;;;;;;;;AAIvB,IAAA,AAAMA,kBAAN,MAAMA;IAGX,MAGMC,SAAS;QACb,OAAO,MAAM,IAAI,CAACC,YAAY,CAACC,OAAO;IACxC;IAEA,MAIMC,OAAO,AAAaC,EAAU,EAAE;QACpC,OAAO,MAAM,IAAI,CAACH,YAAY,CAACI,QAAQ,CAAC,CAACD;IAC3C;IAEA,MAIME,OAAO,AAAQC,IAAmB,EAAE;QACxC,MAAMC,OAAO,MAAM,IAAI,CAACP,YAAY,CAACK,MAAM,CAAC;YAC1CG,OAAOF,KAAKE,KAAK;YACjBC,UAAUH,KAAKG,QAAQ;YACvBC,OAAOJ,KAAKI,KAAK;YACjBC,WAAWL,KAAKK,SAAS;YACzBC,WAAWN,KAAKM,SAAS;QAC3B;QACA,6BAA6B;QAC7B,MAAM,EAAEC,YAAY,EAAE,GAAGC,QAAQ,GAAGP;QACpC,OAAOO;IACT;IAEA,MAKMC,OAAO,AAAaZ,EAAU,EAAE,AAAQG,IAAmB,EAAE;QACjE,OAAO,MAAM,IAAI,CAACN,YAAY,CAACe,MAAM,CAAC,CAACZ,IAAIG;IAC7C;IAEA,MAIMU,OAAO,AAAab,EAAU,EAAE;QACpC,MAAM,IAAI,CAACH,YAAY,CAACiB,MAAM,CAAC,CAACd;QAChC,OAAO;YAAEe,SAAS;QAA4B;IAChD;IAlDA,YAAY,AAAiBlB,YAA0B,CAAE;aAA5BA,eAAAA;IAA6B;AAmD5D;;;QAjDkBmB,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;QAMzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAMzBF,SAAS;;;QACdI,MAAMC,4BAAa;;;QACfJ,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAezBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QAC1BE,MAAME,4BAAa;;;QACfL,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;;QAMzBF,SAAS;;;QACbG,MAAM;QAAMD,aAAa;;;QACtBD,QAAQ;QAAKC,aAAa"}